(()=>{var n="storyapp-v5",t=["/StoryApp/","/StoryApp/index.html","/StoryApp/manifest.json","/StoryApp/app.bundle.js","/StoryApp/app.css","/StoryApp/icons/icon-192.png","/StoryApp/icons/icon-512.png","/StoryApp/images/logo.png"];self.addEventListener("install",(function(e){console.log("[SW] Installing..."),self.skipWaiting(),e.waitUntil(caches.open(n).then((function(n){return n.addAll(t)})).catch((function(n){console.error("[SW] Failed caching:",n)})))})),self.addEventListener("activate",(function(t){console.log("[SW] Activating..."),t.waitUntil(caches.keys().then((function(t){return Promise.all(t.map((function(t){if(t!==n)return console.log("[SW] Deleting old cache:",t),caches.delete(t)})))}))),self.clients.claim()})),self.addEventListener("fetch",(function(t){var e=t.request;if("GET"===e.method){var i=e.url.includes("dicoding.dev/v1"),o=new URL(e.url).origin!==self.location.origin;i||o||t.respondWith(caches.match(e).then((function(t){return t||fetch(e).then((function(t){if(!t||200!==t.status||"opaque"===t.type)return t;var i=t.clone();return caches.open(n).then((function(n){new URL(e.url).origin===self.location.origin&&n.put(e,i)})),t})).catch((function(){return"navigate"===e.mode?caches.match("/index.html"):"image"===e.destination?caches.match("/images/favicon.png"):void 0}))})))}})),self.addEventListener("push",(function(n){console.log("[SW] Push received");var t=n.data?n.data.json():{},e=t.title||"Notifikasi Baru",i={body:t.body||"Ada update dari Story App!",icon:"/icons/icon-192.png",badge:"/icons/icon-192.png"};n.waitUntil(self.registration.showNotification(e,i))}))})();